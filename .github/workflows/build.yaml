name: Build Rolling Program on Official ARM64
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
on: [push]
jobs:
  build-arm64:
    # ä½¿ç”¨ GitHub å®˜æ–¹æä¾›çš„ Ubuntu 24.04 ARM è¿è¡Œå™¨
    # æ³¨æ„ï¼šå®˜æ–¹æ‰˜ç®¡çš„ ARM è¿è¡Œå™¨é€šå¸¸æ ‡è®°ä¸º ubuntu-24.04-arm64
    runs-on: ubuntu-24.04-arm64

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Environment
        run: |
          sudo apt-get update
          sudo apt-get install -y build-essential cmake git
          # æ‰“å°æ¶æ„ä¿¡æ¯ä»¥ç¡®è®¤è¿è¡Œç¯å¢ƒ
          echo "Running on architecture: $(uname -m)"

      - name: Configure and Build
        run: |
          # å‡è®¾ä½ çš„ Rolling ç¨‹åºä½¿ç”¨ CMake æ„å»º
          mkdir -p build
          cd build
          cmake .. -DCMAKE_BUILD_TYPE=Release
          make -j$(nproc)

      - name: Run Tests
        run: |
          cd build
          # å‡è®¾ä½ æœ‰æµ‹è¯•ç¨‹åº
          ctest --output-on-failure || echo "No tests defined"

      - name: Upload Build Artifact
        uses: actions/upload-artifact@v4
        with:
          name: rolling-binary-arm64
          path: build/your_executable_name # æ›¿æ¢ä¸ºä½ çš„ç¨‹åºå
